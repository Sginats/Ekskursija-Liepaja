<!DOCTYPE html>
<html lang="lv">
<head>
    <meta charset="UTF-8">
    <title>Liepājas Karte</title>
    <link rel="stylesheet" href="style.css">
    <script src="../src/js/script.js" defer></script>
</head>
<body>
    <audio id="hover-sound" src="skana/hover.mp3" preload="auto"></audio>
    <audio id="bg-music" loop>
        <source src="skana/music.mp3" type="audio/mpeg">
    </audio>

    <!-- Connection Status Indicator -->
    <div id="connection-status" class="connection-status" style="display: none;"></div>

    <div style="position: fixed; top: 0; left: 0; width: 100%; height: 60px; background: rgba(0,0,0,0.8); z-index: 2000; display: flex; align-items: center; justify-content: space-between; padding: 0 20px; box-sizing: border-box; border-bottom: 2px solid #ffaa00;">
        
        <button id="btn-back" class="btn" style="padding: 5px 15px; font-size: 14px;" onclick="location.href='index.html'">Atpakaļ uz Menu</button>
        
        <div id="score-display" style="color: #ffaa00; font-size: 24px; font-weight: bold; text-shadow: 0 0 10px #ffaa00;">Punkti: 0</div>

        <div style="display: flex; gap: 10px;">
            <button id="btn-settings-map" class="btn" style="padding: 5px 15px; font-size: 14px;" onclick="toggleModal('settings-modal')">Iestatījumi</button>
            <button id="btn-about-map" class="btn" style="padding: 5px 15px; font-size: 14px;" onclick="toggleModal('about-modal')">Par Spēli</button>
        </div>
    </div>

    <div class="map-container" style="margin-top: 70px;">
        
        <div class="ui-layer" style="position: absolute; bottom: 20px; left: 20px; z-index: 100;">
            <div class="difficulty-legend" style="background: rgba(0,0,0,0.9); padding: 15px; border-radius: 10px; border: 1px solid #555;">
                <h3 id="legend-map-title" style="margin: 0 0 10px 0; font-size: 16px; color: #ffaa00;">Apskates vietas</h3>
                <div id="legend-map-green" class="legend-item"><span class="dot point-green"></span>Daba un atpūta</div>
                <div id="legend-map-blue" class="legend-item"><span class="dot point-blue"></span>Kultūra un vēsture</div>
                <div id="legend-map-yellow" class="legend-item"><span class="dot point-yellow"></span>RTU akadēmija</div>
                <div id="legend-map-red" class="legend-item"><span class="dot point-red"></span>Industrija un osta</div>
            </div>
        </div>

        <div class="map-area">
            <div class="point point-yellow" style="top: 12%; left: 11%;" data-name="Ziemeļu mols" onclick="startActivity('Mols')"></div>
            <div class="point point-green" style="top: 24%; left: 44%;"data-name="Karostas cietums" onclick="startActivity('Cietums')"></div>
            <div class="point point-blue" style="top: 58%; left: 23%;" data-name="Tirdzniecības kanāls" onclick="startActivity('Kanals')"></div>
            <div class="point point-blue" style="top: 61.5%; left: 30.5%;" data-name="Lielais Dzintars" onclick="startActivity('Dzintars')"></div>
            <div class="point point-blue" style="top: 63%; left: 27%;" data-name="RTU Liepāja" onclick="startActivity('RTU')"></div>
            <div class="point point-blue" style="top: 64%; left: 37%;" data-name="Liepājas Teātris" onclick="startActivity('Teatris')"></div>
            <div class="point point-red" style="top: 60%; left: 33%;" data-name="Liepājas Osta" onclick="startActivity('Osta')"></div>
            <div class="point point-green" style="top: 70%; left: 12%;" data-name="Jūrmalas parks" onclick="startActivity('Parks')"></div>
            <div class="point point-red" style="top: 61.5%; left: 52.5%;" data-name="LSEZ" onclick="startActivity('LSEZ')"></div>
            <div class="point point-green" style="top: 81%; left: 57%;" data-name="Ezerkrasta taka" onclick="startActivity('Ezerkrasts')"></div>
        </div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <div id="game-modal" class="modal">
        <div class="modal-content quiz-layout">
            <div class="guide-wrapper">
                <img src="atteli/kaija.png" alt="Gids" class="guide-sprite">
                <div class="speech-bubble">
                    <p id="guide-hint">Sveiks! Esmu tavs gids.</p>
                </div>
            </div>
            <div class="task-section">
                </div>
        </div>
    </div>

    <div id="settings-modal" class="modal" style="z-index: 3000;">
        <div class="modal-content">
            <h2 id="settings-title">Iestatījumi</h2>
            <label id="vol-music">Mūzika</label>
            <input type="range" min="0" max="100" value="30" oninput="setMusicVolume(this.value)">
            <label id="vol-sfx">Skaņas efekti</label>
            <input type="range" min="0" max="100" value="50" oninput="setSFXVolume(this.value)">
            <h3 id="lang-title">Valoda</h3>
            <div class="lang-switch">
                <button class="lang-btn" onclick="setLanguage('lv')">LATVIEŠU</button>
                <button class="lang-btn" onclick="setLanguage('en')">ENGLISH</button>
            </div>
            <button id="btn-close-settings" class="btn close-btn" onclick="toggleModal('settings-modal')">Aizvērt</button>
        </div>
    </div>

    <div id="about-modal" class="modal" style="z-index: 3000;">
        <div class="modal-content">
            <h2 id="about-title">Par Spēli</h2>
            <div class="info-box">
                <p id="about-autori">Autori: Niks Šenvalds, Dans Bitenieks</p>
            </div>
            <h3 id="res-title">Resursi</h3>
            <ul>
                <li id="res-1">Karte: OpenStreetMap</li>
                <li id="res-2">Kaija: Autoru zīmējums</li>
            </ul>
            <button id="btn-close-about" class="btn close-btn" onclick="toggleModal('about-modal')">Aizvērt</button>
        </div>
    </div>

</body>
</html>