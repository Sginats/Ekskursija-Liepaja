<!DOCTYPE html>
<html lang="lv">
<head>
    <meta charset="UTF-8">
    <title>Liepājas Karte</title>
    <link rel="stylesheet" href="style.css">
    <script src="core/scoring.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.80.1/dist/phaser.min.js" defer></script>
    <script src="minigames.js" defer></script>
    <script src="script.js?v=FINAL" defer></script>
</head>
<body>
    <div class="map-container">
        
        <div class="ui-layer">
            <button id="btn-back" class="btn back-btn" onclick="location.href='index.html'">Atpakaļ</button>
            <div id="score-display">Punkti: 0</div>
            <div id="progress-display">Maršruts: 0/10</div>
            <button id="btn-rules" class="btn rules-btn" onclick="toggleModal('rules-modal')">Noteikumi</button>

            <div class="difficulty-legend">
                <h3 id="legend-map-title">Grūtības pakāpes</h3>
                <div id="legend-map-green" class="legend-item"><span class="dot point-green"></span> Viegli: Daba un atpūta</div>
                <div id="legend-map-blue" class="legend-item"><span class="dot point-blue"></span> Vidēji: Kultūra un vēsture</div>
                <div id="legend-map-yellow" class="legend-item"><span class="dot point-yellow"></span> Eksperts: RTU akadēmija</div>
                <div id="legend-map-red" class="legend-item"><span class="dot point-red"></span> Izaicinājums: Industrija un osta</div>
            </div>
        </div>

        <div class="map-area">
            <div class="point point-green" style="top: 12%; left: 11%;" data-id="Mols" data-name="Ziemeļu mols" onclick="startActivity('Mols')"></div>
            <div class="point point-green" style="top: 24%; left: 44%;" data-id="Cietums" data-name="Karostas cietums" onclick="startActivity('Cietums')"></div>
            <div class="point point-blue" style="top: 58%; left: 23%;" data-id="Kanals" data-name="Tirdzniecības kanāls" onclick="startActivity('Kanals')"></div>
            <div class="point point-blue" style="top: 61.5%; left: 30.5%;" data-id="Dzintars" data-name="Lielais Dzintars" onclick="startActivity('Dzintars')"></div>
            <div class="point point-yellow" style="top: 63%; left: 27%;" data-id="RTU" data-name="RTU Liepājas akadēmija" onclick="startActivity('RTU')"></div>
            <div class="point point-blue" style="top: 64%; left: 37%;" data-id="Teatris" data-name="Liepājas Teātris" onclick="startActivity('Teatris')"></div>
            <div class="point point-red" style="top: 60%; left: 33%;" data-id="Osta" data-name="Liepājas osta" onclick="startActivity('Osta')"></div>
            <div class="point point-green" style="top: 70%; left: 12%;" data-id="Atputa" data-name="Atpūtas vieta" onclick="startActivity('Atputa')"></div>
            <div class="point point-red" style="top: 61.5%; left: 52.5%;" data-id="LSEZ" data-name="LSEZ ražotne" onclick="startActivity('LSEZ')"></div>
            <div class="point point-green" style="top: 81%; left: 57%;" data-id="Ezerkrasts" data-name="Ezerkrasta taka" onclick="startActivity('Ezerkrasts')"></div>
        </div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <div id="game-modal" class="modal">
        <div class="modal-content quiz-layout">
            <div class="guide-wrapper">
                <img src="atteli/kaija.png" alt="Gids" class="guide-sprite">
                <div class="speech-bubble">
                    <p id="guide-hint">Sveiks! Esmu tavs gids.</p>
                </div>
            </div>
            
            <div class="task-section">
                <h2 id="task-title">Vieta</h2>
                <p id="task-desc">Izvēlies punktu kartē, lai sāktu uzdevumu.</p>
            </div>
            <div id="phaser-container" class="phaser-container"></div>
        </div>
    </div>

    <div id="minigame-overlay" class="minigame-overlay">
        <div class="minigame-overlay-content">
            <h3 data-overlay-title></h3>
            <p data-overlay-body></p>
            <div class="minigame-overlay-actions">
                <button class="btn" data-overlay-primary>Turpināt</button>
                <button class="btn" data-overlay-secondary>Atcelt</button>
            </div>
        </div>
    </div>

    <div id="rules-modal" class="modal">
        <div class="modal-content">
            <h2>Noteikumi</h2>
            <p>Maršruts tiek izlozēts katrai spēlei. Pēdējā vieta vienmēr ir Atpūtas vieta.</p>
            <p>Katrā vietā ir uzdevums vai minispēle. Punkti tiek skaitīti centralizēti.</p>
            <p>Fināla testā ir 10 jautājumi, un katrs pareizs dod 1 punktu.</p>
            <button class="btn close-btn" onclick="toggleModal('rules-modal')">Aizvērt</button>
        </div>
    </div>

    <div id="end-modal" class="modal">
        <div class="modal-content">
            <h2 id="end-title">Spēle pabeigta!</h2>
            <p><span id="end-score-text">Tavs rezultāts: </span><span id="final-score">0</span><span id="end-points"> punkti</span></p>
            <hr>
            <div id="end-multi-info" style="display: none; margin-bottom: 10px;"></div>
            <input type="text" id="player-name" placeholder="Ievadi savu vārdu" class="btn" style="clip-path: none; width: 80%; margin-bottom: 15px;">
            <br>
            <button id="btn-save" class="btn" onclick="submitResult()">Saglabāt rezultātu</button>
        </div>
    </div>
</body>
</html>
