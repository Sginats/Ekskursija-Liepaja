<!DOCTYPE html>
<html lang="lv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Liepājas Karte</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css?v=20260218153000">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="src/js/script.js?v=20260216194225" defer></script>
</head>
<body>
    <div class="wrap" id="bg-wrap"></div>
    <canvas id="cursor-canvas" style="position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:9998;"></canvas>
    <audio id="hover-sound" src="skana/hover.wav" preload="auto"></audio>
    <audio id="bg-music" src="skana/music.wav" loop preload="auto"></audio>

    <div id="connection-status" class="connection-status" style="display: none;"></div>

    <div class="map-topbar">
        
        <button id="btn-back" class="btn topbar-btn" onclick="location.href='index.html'">← Menu</button>
        
        <div id="score-display" class="topbar-score">Punkti: 0</div>

        <div class="topbar-right">
            <button id="btn-settings-map" class="btn topbar-btn" onclick="toggleModal('settings-modal')">⚙</button>
            <button id="btn-about-map" class="btn topbar-btn" onclick="toggleModal('about-modal')">ℹ</button>
        </div>
    </div>

    <div class="map-container" style="margin-top: 70px;">
        
        <div class="ui-layer" style="position: absolute; bottom: 20px; left: 20px; z-index: 100;">
            <div class="difficulty-legend" style="background: rgba(0,0,0,0.9); padding: 15px; border-radius: 10px; border: 1px solid #555;">
                <h3 id="legend-map-title" style="margin: 0 0 10px 0; font-size: 16px; color: #ffaa00;">Apskates vietas</h3>
                <div id="legend-map-green" class="legend-item"><span class="dot point-green"></span>Daba un atpūta</div>
                <div id="legend-map-blue" class="legend-item"><span class="dot point-blue"></span>Kultūra un vēsture</div>
                <div id="legend-map-yellow" class="legend-item"><span class="dot point-yellow"></span>RTU akadēmija</div>
                <div id="legend-map-red" class="legend-item"><span class="dot point-red"></span>Industrija un osta</div>
            </div>
        </div>

        <div class="map-area">
            <div class="point point-green" style="top: 12%; left: 11%;" data-name="Ziemeļu mols" onclick="startActivity('Mols')"></div>
            <div class="point point-blue" style="top: 24%; left: 44%;" data-name="Karostas cietums" onclick="startActivity('Cietums')"></div>
            <div class="point point-blue" style="top: 58%; left: 23%;" data-name="Tirdzniecības kanāls" onclick="startActivity('Kanals')"></div>
            <div class="point point-blue" style="top: 61.5%; left: 30.5%;" data-name="Lielais Dzintars" onclick="startActivity('Dzintars')"></div>
            <div class="point point-yellow" style="top: 63%; left: 27%;" data-name="RTU Liepāja" onclick="startActivity('RTU')"></div>
            <div class="point point-blue" style="top: 64%; left: 37%;" data-name="Liepājas Teātris" onclick="startActivity('Teatris')"></div>
            <div class="point point-red" style="top: 60%; left: 33%;" data-name="Liepājas Osta" onclick="startActivity('Osta')"></div>
            <div class="point point-green" style="top: 70%; left: 12%;" data-name="Jūrmalas parks" onclick="startActivity('Parks')"></div>
            <div class="point point-red" style="top: 61.5%; left: 52.5%;" data-name="LSEZ" onclick="startActivity('LSEZ')"></div>
            <div class="point point-green" style="top: 81%; left: 57%;" data-name="Ezerkrasta taka" onclick="startActivity('Ezerkrasts')"></div>
        </div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <div id="game-modal" class="modal">
        <div class="modal-content quiz-layout">
            <div class="guide-wrapper">
                <img src="atteli/kaija.png" alt="Gids" class="guide-sprite">
                <div class="speech-bubble">
                    <p id="guide-hint">Sveiks! Esmu tavs gids.</p>
                </div>
            </div>
            <div class="task-section">
                </div>
        </div>
    </div>

    <div id="settings-modal" class="modal" style="z-index: 3000;">
        <div class="modal-content">
            <h2 id="settings-title">Iestatījumi</h2>
            
            <h3 class="section-title">Audio</h3>
            <label id="vol-music">Mūzika</label>
            <input type="range" min="0" max="100" value="30" oninput="setMusicVolume(this.value)">
            <label id="vol-sfx">Skaņas efekti</label>
            <input type="range" min="0" max="100" value="50" oninput="setSFXVolume(this.value)">
            
            <h3 class="section-title">Krāsu tēma</h3>
            <div class="theme-selector">
                <button class="theme-btn" onclick="setTheme('default')" data-theme="default">
                    <span class="theme-preview" style="background: linear-gradient(135deg, #332222, #2a1a1a);"></span>
                    Noklusējuma
                </button>
                <button class="theme-btn" onclick="setTheme('dark')" data-theme="dark">
                    <span class="theme-preview" style="background: linear-gradient(135deg, #2d1b4e, #1a0f30);"></span>
                    Violeta
                </button>
                <button class="theme-btn" onclick="setTheme('light')" data-theme="light">
                    <span class="theme-preview" style="background: linear-gradient(135deg, #4a0f0f, #3a0a0a);"></span>
                    Tumši sarkana
                </button>
                <button class="theme-btn" onclick="setTheme('blue')" data-theme="blue">
                    <span class="theme-preview" style="background: linear-gradient(135deg, #1e3a5f, #2c5f8d);"></span>
                    Zila
                </button>
            </div>
            
            <h3 class="section-title">Animācijas</h3>
            <div class="animation-toggle">
                <label class="toggle-label" for="animation-toggle">
                    <span>Animācijas On/Off</span>
                    <div class="toggle-switch">
                        <input type="checkbox" id="animation-toggle" checked onchange="toggleAnimations(this.checked)">
                        <span class="toggle-slider"></span>
                    </div>
                </label>
            </div>
            
            <button id="btn-close-settings" class="btn close-btn" onclick="toggleModal('settings-modal')">Aizvērt</button>
        </div>
    </div>

    <div id="about-modal" class="modal" style="z-index: 3000;">
        <div class="modal-content about-layout">
            <h2 id="about-title" style="text-align: center; color: #ffaa00; text-transform: uppercase; margin-top: 0;">Par Spēli</h2>
            
            <div class="info-box">
                <p><strong id="about-game-label">Spēle:</strong> "Mācību ekskursija Liepājā"</p>
                <p><strong id="about-goal-label">Mērķis:</strong> <span id="about-goal-text">Iepazīt Liepājas kultūrvēsturiskās vietas, uzņēmumus un RTU akadēmiju, veicot interaktīvus uzdevumus un sacensties par labākajiem rezultātiem.</span></p>
            </div>

            <h3 class="section-title">Spēles noteikumi</h3>
            <div class="info-box">
                <ol style="margin: 5px 0 0 20px; font-size: 14px; line-height: 1.8;">
                    <li>Ekskursija ietver <strong>10 apmeklējuma vietas</strong> Liepājā, kas jāapmeklē noteiktā secībā.</li>
                    <li>Katrā vietā saņemsi <strong>informāciju par vietu</strong> un <strong>uzdevumu</strong> (jautājums, mini-spēle vai secības uzdevums).</li>
                    <li>Par <strong>pareizu atbildi</strong> pirmajā mēģinājumā saņemsi <strong>+10 punktus</strong>.</li>
                    <li>Par <strong>pareizu atbildi</strong> pēc 1 nepareizas — <strong>+5 punkti</strong>. Pēc 2 nepareizām — <strong>0 punkti</strong>, atbilde tiek parādīta.</li>
                    <li>Katru vietu var apmeklēt <strong>tikai vienu reizi</strong>.</li>
                    <li>Pēdējā apmeklējuma vieta vienmēr ir <strong>atpūtas vieta</strong>.</li>
                    <li>Pēc visu vietu apmeklēšanas seko <strong>noslēguma tests</strong> — 5 jautājumi par Liepāju (katra pareiza atbilde: <strong>+2 bonusa punkti</strong>, maks. +10).</li>
                    <li>Spēles beigās tiek parādīts tavs <strong>rezultāts</strong> un <strong>laiks</strong>. Maksimālais rezultāts: <strong>110 punkti</strong>.</li>
                    <li>Vari saglabāt rezultātu un iekļūt <strong>Top 10 tabulā</strong>!</li>
                </ol>
            </div>

            <h3 id="legend-title" class="section-title">Objektu nozīme kartē</h3>
            <ul class="legend-list">
                <li id="legend-green"><span class="dot point-green"></span> Zaļš: Daba un atpūta</li>
                <li id="legend-blue"><span class="dot point-blue"></span> Zils: Kultūra un vēsture</li>
                <li id="legend-yellow"><span class="dot point-yellow"></span> Dzeltens: RTU Liepājas akadēmija</li>
                <li id="legend-red"><span class="dot point-red"></span> Sarkans: Industrija un osta</li>
            </ul>

            <div class="two-columns">
                <div>
                    <h3 id="tech-title" class="section-title">Tehnoloģijas</h3>
                    <ul class="tech-list">
                        <li>HTML5 / CSS3</li>
                        <li>JavaScript (ES6+)</li>
                        <li>PHP (Backend)</li>
                        <li>WebSocket (Real-time)</li>
                        <li>Node.js (Server)</li>
                        <li>AI: Gemini, Claude, Copilot</li>
                    </ul>
                </div>
                <div>
                    <h3 id="dev-title" class="section-title">Izstrādātāji (2PT)</h3>
                    <ul class="author-list">
                        <li>Niks Šenvalds</li>
                        <li>Dans Bitenieks</li>
                    </ul>
                </div>
            </div>

            <h3 id="res-title" class="section-title" style="margin-top: 15px;">Izmantotie resursi</h3>
            <div class="resources-list">
                <p><strong>Attēli:</strong></p>
                <ul>
                    <li>Karte: OpenStreetMap (© OpenStreetMap contributors)</li>
                    <li>Kaija (Gids): Autoru zīmējums</li>
                    <li>Fons: Freepik (freepik.com)</li>
                </ul>
                <p><strong>Audio:</strong></p>
                <ul>
                    <li>Fona mūzika: Programmatiski ģenerēts CC0 audio</li>
                    <li>Hover skaņa: Programmatiski ģenerēts CC0 audio</li>
                </ul>
                <p><strong>Informācija:</strong></p>
                <ul>
                    <li>Fakti par Liepāju: liepaja.lv, rtu.lv</li>
                    <li>Vēsturiskie dati: Liepājas muzejs, wikipedia.org</li>
                </ul>
                <p><strong>Tehnoloģijas un bibliotēkas:</strong></p>
                <ul>
                    <li>Bootstrap 5.3.2 (getbootstrap.com)</li>
                    <li>Node.js, WebSocket (nodejs.org)</li>
                </ul>
            </div>

            <button id="btn-close-about" class="btn close-btn" onclick="toggleModal('about-modal')">Aizvērt</button>
        </div>
    </div>

</body>
</html>